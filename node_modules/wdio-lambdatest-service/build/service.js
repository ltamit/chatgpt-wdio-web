"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
require("source-map-support/register");
var _logger = _interopRequireDefault(require("@wdio/logger"));
var _util = require("./util.js");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
const log = (0, _logger.default)('@wdio/lambdatest-service');
const DEFAULT_OPTIONS = {
  setSessionName: true,
  setSessionStatus: true
};
class LambdaRestService {
  constructor(options = {}, capabilities = {}, config = {}) {
    var _this$_config, _this$_config2;
    _defineProperty(this, "_api", void 0);
    _defineProperty(this, "_browser", void 0);
    _defineProperty(this, "_capabilities", void 0);
    _defineProperty(this, "_config", void 0);
    _defineProperty(this, "_failReasons", []);
    _defineProperty(this, "_failures", 0);
    _defineProperty(this, "_failureStatuses", ['failed', 'ambiguous', 'undefined', 'unknown']);
    _defineProperty(this, "_fullTitle", void 0);
    _defineProperty(this, "_isServiceEnabled", true);
    _defineProperty(this, "_options", DEFAULT_OPTIONS);
    _defineProperty(this, "_scenariosThatRan", []);
    _defineProperty(this, "_specsRan", false);
    _defineProperty(this, "_suiteTitle", void 0);
    _defineProperty(this, "_testCnt", 0);
    _defineProperty(this, "_testTitle", void 0);
    _defineProperty(this, "_error", void 0);
    _defineProperty(this, "_ltErrorRemark", void 0);
    _defineProperty(this, "_lambdaCredentials", void 0);
    _defineProperty(this, "_currentTestTitle", void 0);
    this._options = {
      ...DEFAULT_OPTIONS,
      ...options
    };
    this._capabilities = capabilities;
    this._config = config;
    this._testCnt = 0;
    this._failures = 0;
    const strict = Boolean(((_this$_config = this._config) === null || _this$_config === void 0 ? void 0 : _this$_config.cucumberOpts) && ((_this$_config2 = this._config) === null || _this$_config2 === void 0 || (_this$_config2 = _this$_config2.cucumberOpts) === null || _this$_config2 === void 0 ? void 0 : _this$_config2.strict));
    if (strict) {
      this._failureStatuses.push('pending');
    }
  }
  before(caps, specs, browser) {
    this._browser = browser;
    this._scenariosThatRan = [];
  }
  beforeSession(config, capabilities) {
    this._config = {
      ...this._config,
      ...config
    };
    this._capabilities = {
      ...this._capabilities,
      ...capabilities
    };
    const lambdaCredentials = {
      username: this._config.user,
      accessKey: this._config.key,
      isApp: false
    };
    if (this._config.product === 'appAutomation') {
      lambdaCredentials.isApp = true;
    }
    if (this._config.logFile) {
      lambdaCredentials.logFile = this._config.logFile;
    }
    if (this._config.ltErrorRemark === true) {
      this._ltErrorRemark = true;
    }
    this._isServiceEnabled = lambdaCredentials.username && lambdaCredentials.accessKey;
    this._lambdaCredentials = lambdaCredentials;
  }
  async beforeScenario(world, context) {
    if (!this._suiteTitle) {
      var _world$gherkinDocumen, _context$document, _world$pickle;
      this._suiteTitle = (world === null || world === void 0 || (_world$gherkinDocumen = world.gherkinDocument) === null || _world$gherkinDocumen === void 0 || (_world$gherkinDocumen = _world$gherkinDocumen.feature) === null || _world$gherkinDocumen === void 0 ? void 0 : _world$gherkinDocumen.name) || (context === null || context === void 0 || (_context$document = context.document) === null || _context$document === void 0 || (_context$document = _context$document.feature) === null || _context$document === void 0 ? void 0 : _context$document.name) || (world === null || world === void 0 || (_world$pickle = world.pickle) === null || _world$pickle === void 0 ? void 0 : _world$pickle.name) || 'unknown scenario';
      await this.setSessionName(this._suiteTitle);
    }
  }
  async beforeSuite(suite) {
    this._suiteTitle = suite.title;
    if (suite.title && suite.title !== 'Jasmine__TopLevel__Suite') {
      await this.setSessionName(suite.title);
    }
  }
  async beforeTest(test) {
    if (!this._isServiceEnabled) {
      return;
    }
    if (test && (test === null || test === void 0 ? void 0 : test.parent) !== undefined) {
      this._currentTestTitle = test === null || test === void 0 ? void 0 : test.parent;
      this._currentTestTitle = `${this._currentTestTitle} - ${test === null || test === void 0 ? void 0 : test.title}`;
    } else if (test && (test === null || test === void 0 ? void 0 : test.fullName) !== undefined) {
      this._currentTestTitle = test === null || test === void 0 ? void 0 : test.fullName;
    }
    if (test.title && !this._testTitle) {
      this._testTitle = test.title;
    }
    let suiteTitle = this._suiteTitle;
    if (test.fullName) {
      const testSuiteName = test.fullName;
      if (this._suiteTitle === 'Jasmine__TopLevel__Suite') {
        suiteTitle = testSuiteName;
      } else if (this._suiteTitle) {
        suiteTitle = (0, _util.getParentSuiteName)(this._suiteTitle, testSuiteName);
      }
    }
    await this.setSessionName(suiteTitle, test);
  }
  async beforeFeature(uri, feature) {
    this._suiteTitle = feature.name;
    await this.setSessionName(this._suiteTitle);
  }
  async beforeStep(step) {
    if (!this._suiteTitle || this._suiteTitle == 'unknown scenario') {
      var _step$document, _step$step;
      this._suiteTitle = ((_step$document = step.document) === null || _step$document === void 0 || (_step$document = _step$document.feature) === null || _step$document === void 0 ? void 0 : _step$document.name) || ((_step$step = step.step) === null || _step$step === void 0 || (_step$step = _step$step.scenario) === null || _step$step === void 0 ? void 0 : _step$step.name) || 'unknown scenario';
      await this.setSessionName(this._suiteTitle);
    }
  }
  afterSuite(suite) {
    if (Object.prototype.hasOwnProperty.call(suite, 'error')) {
      ++this._failures;
    }
  }
  afterTest(test, context, {
    error,
    passed
  }) {
    this._specsRan = true;
    if (test._retriedTest && passed) {
      --this._failures;
      return;
    }
    if (test._retriedTest && !passed && typeof test._currentRetry === 'number' && typeof test._retries === 'number' && test._currentRetry < test._retries) {
      return;
    }
    const isJasminePendingError = typeof error === 'string' && error.includes('marked Pending');
    if (!passed && !isJasminePendingError) {
      ++this._failures;
      this._failReasons.push(error && error.message || 'Unknown Error');
      this._error = error.message || 'Unknown Error';
      if (this._ltErrorRemark && this._error !== null && this._error !== undefined) {
        this._setSessionRemarks(this._error);
      }
    }
  }
  afterScenario(world, result) {
    var _world$result;
    const {
      passed
    } = result || {};
    this._specsRan = true;
    const status = (_world$result = world.result) === null || _world$result === void 0 ? void 0 : _world$result.status.toLowerCase();
    if (status !== 'skipped') {
      this._scenariosThatRan.push(world.pickle.name || 'unknown pickle name');
    }
    if (status && this._failureStatuses.includes(status)) {
      const exception = world.result && world.result.message || (status === 'pending' ? `Some steps/hooks are pending for scenario "${world.pickle.name}"` : 'Unknown Error');
      ++this._failures;
      this._failReasons.push(exception);
    } else if (typeof passed !== 'undefined' && !passed) {
      ++this._failures;
    }
  }
  after(result) {
    if (!this._isServiceEnabled) {
      return;
    }
    let failures = this._failures;
    if (this._config.mochaOpts && this._config.mochaOpts.bail && Boolean(result)) {
      failures = 1;
    }
    if (result === 0) {
      failures = 0;
    }
    const {
      preferScenarioName
    } = this._options;
    if (preferScenarioName && this._scenariosThatRan.length === 1) {
      this._fullTitle = this._scenariosThatRan.pop();
    }
    const status = 'status: ' + (result > 0 ? 'failed' : 'passed');
    if (!this._browser.isMultiremote) {
      log.info(`Update job with sessionId ${this._browser.sessionId}, ${status}`);
      return this._update({
        sessionId: this._browser.sessionId,
        failures: result
      });
    }
    return Promise.all(Object.keys(this._capabilities).map(browserName => {
      log.info(`Update multiremote job for browser '${browserName}' and sessionId ${this._browser[browserName].sessionId}, ${status}`);
      return this._update({
        sessionId: this._browser[browserName].sessionId,
        failures: failures,
        calledOnReload: false,
        browserName: browserName
      });
    }));
  }
  async onReload(oldSessionId, newSessionId) {
    if (!this._isServiceEnabled) {
      return;
    }
    const status = this._failures > 0 ? 'failed' : 'passed';
    if (!this._browser.isMultiremote) {
      log.info(`Update (reloaded) job with sessionId ${oldSessionId}, ${status}`);
      await this._update({
        sessionId: oldSessionId,
        fullTitle: this._currentTestTitle,
        status: status,
        calledOnReload: true
      });
    } else {
      const browserName = this._browser.instances.filter(browserName => this._browser[browserName].sessionId === newSessionId)[0];
      log.info(`Update (reloaded) multiremote job for browser '${browserName}' and sessionId ${oldSessionId}, ${status}`);
      await this._update({
        sessionId: oldSessionId,
        failures: this._failures,
        calledOnReload: true,
        browserName: browserName
      });
    }
    this._failReasons = [];
    this._scenariosThatRan = [];
    delete this._suiteTitle;
    delete this._fullTitle;
  }
  async _update({
    sessionId,
    fullTitle,
    status,
    failures,
    calledOnReload = false,
    browserName
  }) {
    if (!this._options.setSessionStatus) {
      return;
    }
    const sleep = ms => new Promise(r => setTimeout(r, ms));
    await sleep(5000);
    if (calledOnReload) {
      return await this.updateJob({
        sessionId,
        fullTitle,
        status,
        calledOnReload,
        browserName
      });
    }
    return await this.updateJob({
      sessionId,
      _failures: failures,
      calledOnReload,
      browserName
    });
  }
  async updateJob({
    sessionId,
    fullTitle,
    status,
    _failures,
    calledOnReload = false,
    browserName
  }) {
    let body = this.getBody({
      _failures,
      calledOnReload,
      browserName
    });
    if (calledOnReload) {
      body = this.getBody({
        fullTitle,
        status,
        calledOnReload,
        browserName
      });
    }
    try {
      await (0, _util.updateSessionById)(sessionId, body, this._lambdaCredentials);
    } catch (ex) {
      console.log(ex);
    }
    this._failures = 0;
  }
  getBody({
    fullTitle,
    status,
    _failures,
    calledOnReload = false,
    browserName
  }) {
    let body = {};
    if (!(!this._browser.isMultiremote && this._capabilities.name || this._browser.isMultiremote && this._capabilities[browserName].capabilities.name)) {
      body.name = this._fullTitle;
      if (calledOnReload) {
        body.name = fullTitle;
      }
      if (this._capabilities['LT:Options'] && this._capabilities['LT:Options'].name) {
        body.name = this._capabilities['LT:Options'].name;
      }
      if (browserName) {
        body.name = `${browserName}: ${body.name}`;
      }
      if (calledOnReload || this._testCnt) {
        let testCnt = ++this._testCnt;
        if (this._browser.isMultiremote) {
          testCnt = Math.ceil(testCnt / this._browser.instances.length);
        }
        if (!calledOnReload) {
          body.name += ` (${testCnt})`;
        }
      }
    }
    body.status_ind = _failures > 0 ? 'failed' : 'passed';
    if (calledOnReload) {
      body.status_ind = status;
    }
    return body;
  }
  async setSessionName(suiteTitle, test) {
    if (!this._options.setSessionName || !suiteTitle) {
      return;
    }
    let name = suiteTitle;
    if (this._options.sessionNameFormat) {
      name = this._options.sessionNameFormat(this._config, this._capabilities, suiteTitle, test === null || test === void 0 ? void 0 : test.title);
    } else if (test && !test.fullName) {
      const pre = this._options.sessionNamePrependTopLevelSuiteTitle ? `${suiteTitle} - ` : '';
      const post = !this._options.sessionNameOmitTestTitle ? ` - ${test.title}` : '';
      name = `${pre}${test.parent}${post}`;
    }
    if (name !== this.__fullTitle) {
      this.__fullTitle = name;
      await this._setSessionName(name);
    }
  }
  async _setSessionRemarks(err) {
    let replacedString = err.replace(/"/g, "'");
    let errorCustom = `lambda-hook: {"action": "setTestStatus","arguments": {"status":"failed","remark":"${replacedString}"}}`;
    try {
      await this._browser.execute(errorCustom);
    } catch (error) {
      console.log(error);
    }
  }
  async _setSessionName(sessionName) {
    await this._executeCommand(`lambda-name=${sessionName}`);
  }
  async _executeCommand(cmd) {
    if (!this._browser) {
      return;
    }
    if (this._browser.isMultiremote) {
      return Promise.all(Object.keys(this._capabilities).map(async browserName => {
        const browser = this._browser[browserName];
        return await browser.execute(cmd);
      }));
    }
    return await this._browser.execute(cmd);
  }
}
exports.default = LambdaRestService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXRpbCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2RlZmluZVByb3BlcnR5Iiwia2V5IiwidmFsdWUiLCJfdG9Qcm9wZXJ0eUtleSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiYXJnIiwiX3RvUHJpbWl0aXZlIiwiU3RyaW5nIiwiaW5wdXQiLCJoaW50IiwicHJpbSIsIlN5bWJvbCIsInRvUHJpbWl0aXZlIiwidW5kZWZpbmVkIiwicmVzIiwiY2FsbCIsIlR5cGVFcnJvciIsIk51bWJlciIsImxvZyIsImxvZ2dlciIsIkRFRkFVTFRfT1BUSU9OUyIsInNldFNlc3Npb25OYW1lIiwic2V0U2Vzc2lvblN0YXR1cyIsIkxhbWJkYVJlc3RTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwiY2FwYWJpbGl0aWVzIiwiY29uZmlnIiwiX3RoaXMkX2NvbmZpZyIsIl90aGlzJF9jb25maWcyIiwiX29wdGlvbnMiLCJfY2FwYWJpbGl0aWVzIiwiX2NvbmZpZyIsIl90ZXN0Q250IiwiX2ZhaWx1cmVzIiwic3RyaWN0IiwiQm9vbGVhbiIsImN1Y3VtYmVyT3B0cyIsIl9mYWlsdXJlU3RhdHVzZXMiLCJwdXNoIiwiYmVmb3JlIiwiY2FwcyIsInNwZWNzIiwiYnJvd3NlciIsIl9icm93c2VyIiwiX3NjZW5hcmlvc1RoYXRSYW4iLCJiZWZvcmVTZXNzaW9uIiwibGFtYmRhQ3JlZGVudGlhbHMiLCJ1c2VybmFtZSIsInVzZXIiLCJhY2Nlc3NLZXkiLCJpc0FwcCIsInByb2R1Y3QiLCJsb2dGaWxlIiwibHRFcnJvclJlbWFyayIsIl9sdEVycm9yUmVtYXJrIiwiX2lzU2VydmljZUVuYWJsZWQiLCJfbGFtYmRhQ3JlZGVudGlhbHMiLCJiZWZvcmVTY2VuYXJpbyIsIndvcmxkIiwiY29udGV4dCIsIl9zdWl0ZVRpdGxlIiwiX3dvcmxkJGdoZXJraW5Eb2N1bWVuIiwiX2NvbnRleHQkZG9jdW1lbnQiLCJfd29ybGQkcGlja2xlIiwiZ2hlcmtpbkRvY3VtZW50IiwiZmVhdHVyZSIsIm5hbWUiLCJkb2N1bWVudCIsInBpY2tsZSIsImJlZm9yZVN1aXRlIiwic3VpdGUiLCJ0aXRsZSIsImJlZm9yZVRlc3QiLCJ0ZXN0IiwicGFyZW50IiwiX2N1cnJlbnRUZXN0VGl0bGUiLCJmdWxsTmFtZSIsIl90ZXN0VGl0bGUiLCJzdWl0ZVRpdGxlIiwidGVzdFN1aXRlTmFtZSIsImdldFBhcmVudFN1aXRlTmFtZSIsImJlZm9yZUZlYXR1cmUiLCJ1cmkiLCJiZWZvcmVTdGVwIiwic3RlcCIsIl9zdGVwJGRvY3VtZW50IiwiX3N0ZXAkc3RlcCIsInNjZW5hcmlvIiwiYWZ0ZXJTdWl0ZSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiYWZ0ZXJUZXN0IiwiZXJyb3IiLCJwYXNzZWQiLCJfc3BlY3NSYW4iLCJfcmV0cmllZFRlc3QiLCJfY3VycmVudFJldHJ5IiwiX3JldHJpZXMiLCJpc0phc21pbmVQZW5kaW5nRXJyb3IiLCJpbmNsdWRlcyIsIl9mYWlsUmVhc29ucyIsIm1lc3NhZ2UiLCJfZXJyb3IiLCJfc2V0U2Vzc2lvblJlbWFya3MiLCJhZnRlclNjZW5hcmlvIiwicmVzdWx0IiwiX3dvcmxkJHJlc3VsdCIsInN0YXR1cyIsInRvTG93ZXJDYXNlIiwiZXhjZXB0aW9uIiwiYWZ0ZXIiLCJmYWlsdXJlcyIsIm1vY2hhT3B0cyIsImJhaWwiLCJwcmVmZXJTY2VuYXJpb05hbWUiLCJsZW5ndGgiLCJfZnVsbFRpdGxlIiwicG9wIiwiaXNNdWx0aXJlbW90ZSIsImluZm8iLCJzZXNzaW9uSWQiLCJfdXBkYXRlIiwiUHJvbWlzZSIsImFsbCIsImtleXMiLCJtYXAiLCJicm93c2VyTmFtZSIsImNhbGxlZE9uUmVsb2FkIiwib25SZWxvYWQiLCJvbGRTZXNzaW9uSWQiLCJuZXdTZXNzaW9uSWQiLCJmdWxsVGl0bGUiLCJpbnN0YW5jZXMiLCJmaWx0ZXIiLCJzbGVlcCIsIm1zIiwiciIsInNldFRpbWVvdXQiLCJ1cGRhdGVKb2IiLCJib2R5IiwiZ2V0Qm9keSIsInVwZGF0ZVNlc3Npb25CeUlkIiwiZXgiLCJjb25zb2xlIiwidGVzdENudCIsIk1hdGgiLCJjZWlsIiwic3RhdHVzX2luZCIsInNlc3Npb25OYW1lRm9ybWF0IiwicHJlIiwic2Vzc2lvbk5hbWVQcmVwZW5kVG9wTGV2ZWxTdWl0ZVRpdGxlIiwicG9zdCIsInNlc3Npb25OYW1lT21pdFRlc3RUaXRsZSIsIl9fZnVsbFRpdGxlIiwiX3NldFNlc3Npb25OYW1lIiwiZXJyIiwicmVwbGFjZWRTdHJpbmciLCJyZXBsYWNlIiwiZXJyb3JDdXN0b20iLCJleGVjdXRlIiwic2Vzc2lvbk5hbWUiLCJfZXhlY3V0ZUNvbW1hbmQiLCJjbWQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vc3JjL3NlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZ2dlciBmcm9tICdAd2Rpby9sb2dnZXInXG5cbmltcG9ydCB7IGdldFBhcmVudFN1aXRlTmFtZSwgdXBkYXRlU2Vzc2lvbkJ5SWQgfSBmcm9tICcuL3V0aWwuanMnXG5cbmNvbnN0IGxvZyA9IGxvZ2dlcignQHdkaW8vbGFtYmRhdGVzdC1zZXJ2aWNlJylcblxuLyoqIEB0eXBlIHtpbXBvcnQoJy4vdHlwZXMuanMnKS5MVE9wdGlvbnMgJiBpbXBvcnQoJy4vdHlwZXMuanMnKS5TZXNzaW9uTmFtZU9wdGlvbnN9ICovXG5jb25zdCBERUZBVUxUX09QVElPTlMgPSB7XG4gIHNldFNlc3Npb25OYW1lOiB0cnVlLFxuICBzZXRTZXNzaW9uU3RhdHVzOiB0cnVlXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMYW1iZGFSZXN0U2VydmljZSB7XG4gIF9hcGk7XG4gIF9icm93c2VyO1xuICBfY2FwYWJpbGl0aWVzO1xuICBfY29uZmlnO1xuICBfZmFpbFJlYXNvbnMgPSBbXTtcbiAgX2ZhaWx1cmVzID0gMDtcbiAgX2ZhaWx1cmVTdGF0dXNlcyA9IFsnZmFpbGVkJywgJ2FtYmlndW91cycsICd1bmRlZmluZWQnLCAndW5rbm93biddO1xuICBfZnVsbFRpdGxlO1xuICBfaXNTZXJ2aWNlRW5hYmxlZCA9IHRydWU7XG4gIF9vcHRpb25zID0gREVGQVVMVF9PUFRJT05TO1xuICBfc2NlbmFyaW9zVGhhdFJhbiA9IFtdO1xuICBfc3BlY3NSYW4gPSBmYWxzZTtcbiAgX3N1aXRlVGl0bGU7XG4gIF90ZXN0Q250ID0gMDtcbiAgX3Rlc3RUaXRsZTtcbiAgX2Vycm9yO1xuICBfbHRFcnJvclJlbWFyaztcbiAgX2xhbWJkYUNyZWRlbnRpYWxzO1xuICBfY3VycmVudFRlc3RUaXRsZTtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30sIGNhcGFiaWxpdGllcyA9IHt9LCBjb25maWcgPSB7fSkge1xuICAgIHRoaXMuX29wdGlvbnMgPSB7IC4uLkRFRkFVTFRfT1BUSU9OUywgLi4ub3B0aW9ucyB9O1xuICAgIHRoaXMuX2NhcGFiaWxpdGllcyA9IGNhcGFiaWxpdGllcztcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fdGVzdENudCA9IDA7XG4gICAgdGhpcy5fZmFpbHVyZXMgPSAwO1xuICAgIC8vIEN1Y3VtYmVyIHNwZWNpZmljXG4gICAgY29uc3Qgc3RyaWN0ID0gQm9vbGVhbih0aGlzLl9jb25maWc/LmN1Y3VtYmVyT3B0cyAmJiB0aGlzLl9jb25maWc/LmN1Y3VtYmVyT3B0cz8uc3RyaWN0KTtcbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1Y3VtYmVyL2N1Y3VtYmVyLWpzL2Jsb2IvbWFzdGVyL3NyYy9ydW50aW1lL2luZGV4LnRzI0wxMzZcbiAgICBpZiAoc3RyaWN0KSB7XG4gICAgICB0aGlzLl9mYWlsdXJlU3RhdHVzZXMucHVzaCgncGVuZGluZycpO1xuICAgIH1cbiAgfVxuXG4gIGJlZm9yZShjYXBzLCBzcGVjcywgYnJvd3Nlcikge1xuICAgIHRoaXMuX2Jyb3dzZXIgPSBicm93c2VyO1xuICAgIHRoaXMuX3NjZW5hcmlvc1RoYXRSYW4gPSBbXTtcbiAgfVxuXG4gIGJlZm9yZVNlc3Npb24oY29uZmlnLCBjYXBhYmlsaXRpZXMpIHtcbiAgICB0aGlzLl9jb25maWcgPSB7IC4uLnRoaXMuX2NvbmZpZywgLi4uY29uZmlnIH07XG4gICAgdGhpcy5fY2FwYWJpbGl0aWVzID0geyAuLi50aGlzLl9jYXBhYmlsaXRpZXMsIC4uLmNhcGFiaWxpdGllcyB9O1xuICAgIGNvbnN0IGxhbWJkYUNyZWRlbnRpYWxzID0ge1xuICAgICAgdXNlcm5hbWU6IHRoaXMuX2NvbmZpZy51c2VyLFxuICAgICAgYWNjZXNzS2V5OiB0aGlzLl9jb25maWcua2V5LFxuICAgICAgaXNBcHAgOiBmYWxzZVxuICAgIH07XG5cbiAgICBpZiAodGhpcy5fY29uZmlnLnByb2R1Y3QgPT09ICdhcHBBdXRvbWF0aW9uJykge1xuICAgICAgbGFtYmRhQ3JlZGVudGlhbHMuaXNBcHAgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9jb25maWcubG9nRmlsZSkge1xuICAgICAgbGFtYmRhQ3JlZGVudGlhbHMubG9nRmlsZSA9IHRoaXMuX2NvbmZpZy5sb2dGaWxlO1xuICAgIH1cbiAgICBpZih0aGlzLl9jb25maWcubHRFcnJvclJlbWFyayA9PT10cnVlKVxuICAgIHtcbiAgICAgIHRoaXMuX2x0RXJyb3JSZW1hcms9dHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLl9pc1NlcnZpY2VFbmFibGVkID0gbGFtYmRhQ3JlZGVudGlhbHMudXNlcm5hbWUgJiYgbGFtYmRhQ3JlZGVudGlhbHMuYWNjZXNzS2V5O1xuICAgIHRoaXMuX2xhbWJkYUNyZWRlbnRpYWxzPWxhbWJkYUNyZWRlbnRpYWxzO1xuICAgIFxuICB9XG5cbiAgYXN5bmMgYmVmb3JlU2NlbmFyaW8od29ybGQsIGNvbnRleHQpIHtcbiAgICBpZiAoIXRoaXMuX3N1aXRlVGl0bGUpIHtcbiAgICAgIHRoaXMuX3N1aXRlVGl0bGUgPVxuICAgICAgICB3b3JsZD8uZ2hlcmtpbkRvY3VtZW50Py5mZWF0dXJlPy5uYW1lIHx8XG4gICAgICAgIGNvbnRleHQ/LmRvY3VtZW50Py5mZWF0dXJlPy5uYW1lIHx8XG4gICAgICAgIHdvcmxkPy5waWNrbGU/Lm5hbWUgfHxcbiAgICAgICAgJ3Vua25vd24gc2NlbmFyaW8nO1xuICAgICAgYXdhaXQgdGhpcy5zZXRTZXNzaW9uTmFtZSh0aGlzLl9zdWl0ZVRpdGxlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBiZWZvcmVTdWl0ZShzdWl0ZSkge1xuICAgIHRoaXMuX3N1aXRlVGl0bGUgPSBzdWl0ZS50aXRsZTtcblxuICAgIGlmIChzdWl0ZS50aXRsZSAmJiBzdWl0ZS50aXRsZSAhPT0gJ0phc21pbmVfX1RvcExldmVsX19TdWl0ZScpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2V0U2Vzc2lvbk5hbWUoc3VpdGUudGl0bGUpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGJlZm9yZVRlc3QodGVzdCkge1xuICAgIGlmICghdGhpcy5faXNTZXJ2aWNlRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0ZXN0ICYmIHRlc3Q/LnBhcmVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9jdXJyZW50VGVzdFRpdGxlID0gdGVzdD8ucGFyZW50O1xuICAgICAgdGhpcy5fY3VycmVudFRlc3RUaXRsZSA9IGAke3RoaXMuX2N1cnJlbnRUZXN0VGl0bGV9IC0gJHt0ZXN0Py50aXRsZX1gO1xuICB9IGVsc2UgaWYgKHRlc3QgJiYgdGVzdD8uZnVsbE5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fY3VycmVudFRlc3RUaXRsZSA9IHRlc3Q/LmZ1bGxOYW1lO1xuICB9XG5cbiAgICBpZiAodGVzdC50aXRsZSAmJiAhdGhpcy5fdGVzdFRpdGxlKSB7XG4gICAgICB0aGlzLl90ZXN0VGl0bGUgPSB0ZXN0LnRpdGxlO1xuICAgIH1cblxuICAgIGxldCBzdWl0ZVRpdGxlID0gdGhpcy5fc3VpdGVUaXRsZTtcblxuICAgIGlmICh0ZXN0LmZ1bGxOYW1lKSB7XG4gICAgICAvLyBGb3IgSmFzbWluZSwgYHN1aXRlLnRpdGxlYCBpcyBgSmFzbWluZV9fVG9wTGV2ZWxfX1N1aXRlYC5cbiAgICAgIC8vIFRoaXMgdHdlYWsgYWxsb3dzIHVzIHRvIHNldCB0aGUgcmVhbCBzdWl0ZSBuYW1lLlxuICAgICAgY29uc3QgdGVzdFN1aXRlTmFtZSA9IHRlc3QuZnVsbE5hbWU7XG4gICAgICBpZiAodGhpcy5fc3VpdGVUaXRsZSA9PT0gJ0phc21pbmVfX1RvcExldmVsX19TdWl0ZScpIHtcbiAgICAgICAgc3VpdGVUaXRsZSA9IHRlc3RTdWl0ZU5hbWU7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3N1aXRlVGl0bGUpIHtcbiAgICAgICAgc3VpdGVUaXRsZSA9IGdldFBhcmVudFN1aXRlTmFtZSh0aGlzLl9zdWl0ZVRpdGxlLCB0ZXN0U3VpdGVOYW1lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnNldFNlc3Npb25OYW1lKHN1aXRlVGl0bGUsIHRlc3QpO1xuICB9XG5cbiAgYXN5bmMgYmVmb3JlRmVhdHVyZSh1cmksIGZlYXR1cmUpIHtcbiAgICB0aGlzLl9zdWl0ZVRpdGxlID0gZmVhdHVyZS5uYW1lO1xuICAgIGF3YWl0IHRoaXMuc2V0U2Vzc2lvbk5hbWUodGhpcy5fc3VpdGVUaXRsZSk7XG4gIH1cblxuICBhc3luYyBiZWZvcmVTdGVwKHN0ZXApIHtcbiAgICBpZiAoIXRoaXMuX3N1aXRlVGl0bGUgfHwgdGhpcy5fc3VpdGVUaXRsZSA9PSAndW5rbm93biBzY2VuYXJpbycpIHtcbiAgICAgIHRoaXMuX3N1aXRlVGl0bGUgPVxuICAgICAgICBzdGVwLmRvY3VtZW50Py5mZWF0dXJlPy5uYW1lIHx8XG4gICAgICAgIHN0ZXAuc3RlcD8uc2NlbmFyaW8/Lm5hbWUgfHxcbiAgICAgICAgJ3Vua25vd24gc2NlbmFyaW8nO1xuICAgICAgYXdhaXQgdGhpcy5zZXRTZXNzaW9uTmFtZSh0aGlzLl9zdWl0ZVRpdGxlKTtcbiAgICB9XG4gIH1cblxuICBhZnRlclN1aXRlKHN1aXRlKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzdWl0ZSwgJ2Vycm9yJykpIHtcbiAgICAgICsrdGhpcy5fZmFpbHVyZXM7XG4gICAgfVxuICB9XG5cbiAgYWZ0ZXJUZXN0KHRlc3QsIGNvbnRleHQsIHsgZXJyb3IsIHBhc3NlZCB9KSB7XG4gICAgdGhpcy5fc3BlY3NSYW4gPSB0cnVlO1xuXG4gICAgLy8gcmVtb3ZlIGZhaWx1cmUgaWYgdGVzdCB3YXMgcmV0cmllZCBhbmQgcGFzc2VkXG4gICAgLy8gKE1vY2hhIG9ubHkpXG4gICAgaWYgKHRlc3QuX3JldHJpZWRUZXN0ICYmIHBhc3NlZCkge1xuICAgICAgLS10aGlzLl9mYWlsdXJlcztcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBkb24ndCBidW1wIGZhaWx1cmUgbnVtYmVyIGlmIHRlc3Qgd2FzIHJldHJpZWQgYW5kIHN0aWxsIGZhaWxlZFxuICAgIC8vIChNb2NoYSBvbmx5KVxuICAgIGlmIChcbiAgICAgIHRlc3QuX3JldHJpZWRUZXN0ICYmXG4gICAgICAhcGFzc2VkICYmXG4gICAgICAoXG4gICAgICAgIHR5cGVvZiB0ZXN0Ll9jdXJyZW50UmV0cnkgPT09ICdudW1iZXInICYmXG4gICAgICAgIHR5cGVvZiB0ZXN0Ll9yZXRyaWVzID09PSAnbnVtYmVyJyAmJlxuICAgICAgICB0ZXN0Ll9jdXJyZW50UmV0cnkgPCB0ZXN0Ll9yZXRyaWVzXG4gICAgICApXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaXNKYXNtaW5lUGVuZGluZ0Vycm9yID0gdHlwZW9mIGVycm9yID09PSAnc3RyaW5nJyAmJiBlcnJvci5pbmNsdWRlcygnbWFya2VkIFBlbmRpbmcnKTtcbiAgICBpZiAoIXBhc3NlZCAmJiAhaXNKYXNtaW5lUGVuZGluZ0Vycm9yKSB7XG4gICAgICArK3RoaXMuX2ZhaWx1cmVzO1xuICAgICAgdGhpcy5fZmFpbFJlYXNvbnMucHVzaCgoZXJyb3IgJiYgZXJyb3IubWVzc2FnZSkgfHwgJ1Vua25vd24gRXJyb3InKVxuICAgICAgdGhpcy5fZXJyb3I9ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBFcnJvcic7XG4gICAgICBpZiAodGhpcy5fbHRFcnJvclJlbWFyayAmJiB0aGlzLl9lcnJvciAhPT0gbnVsbCAmJiB0aGlzLl9lcnJvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX3NldFNlc3Npb25SZW1hcmtzKHRoaXMuX2Vycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhZnRlclNjZW5hcmlvKHdvcmxkLCByZXN1bHQpIHtcbiAgICBjb25zdCB7IHBhc3NlZCB9ID0gcmVzdWx0IHx8IHt9O1xuICAgIHRoaXMuX3NwZWNzUmFuID0gdHJ1ZTtcbiAgICBjb25zdCBzdGF0dXMgPSB3b3JsZC5yZXN1bHQ/LnN0YXR1cy50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChzdGF0dXMgIT09ICdza2lwcGVkJykge1xuICAgICAgdGhpcy5fc2NlbmFyaW9zVGhhdFJhbi5wdXNoKHdvcmxkLnBpY2tsZS5uYW1lIHx8ICd1bmtub3duIHBpY2tsZSBuYW1lJyk7XG4gICAgfVxuICAgIGlmIChzdGF0dXMgJiYgdGhpcy5fZmFpbHVyZVN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcbiAgICAgIGNvbnN0IGV4Y2VwdGlvbiA9IChcbiAgICAgICAgKHdvcmxkLnJlc3VsdCAmJiB3b3JsZC5yZXN1bHQubWVzc2FnZSkgfHxcbiAgICAgICAgKHN0YXR1cyA9PT0gJ3BlbmRpbmcnXG4gICAgICAgICAgPyBgU29tZSBzdGVwcy9ob29rcyBhcmUgcGVuZGluZyBmb3Igc2NlbmFyaW8gXCIke3dvcmxkLnBpY2tsZS5uYW1lfVwiYFxuICAgICAgICAgIDogJ1Vua25vd24gRXJyb3InXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgICsrdGhpcy5fZmFpbHVyZXM7XG4gICAgICB0aGlzLl9mYWlsUmVhc29ucy5wdXNoKGV4Y2VwdGlvbilcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBwYXNzZWQgIT09ICd1bmRlZmluZWQnICYmICFwYXNzZWQpIHtcbiAgICAgICsrdGhpcy5fZmFpbHVyZXM7XG4gICAgfVxuICB9XG5cbiAgYWZ0ZXIocmVzdWx0KSB7XG4gICAgaWYgKCF0aGlzLl9pc1NlcnZpY2VFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGZhaWx1cmVzID0gdGhpcy5fZmFpbHVyZXM7XG5cbiAgICAvLyBzZXQgX2ZhaWx1cmVzIGlmIHVzZXIgaGFzIGJhaWwgb3B0aW9uIHNldCBpbiB3aGljaCBjYXNlIGFmdGVyVGVzdCBhbmRcbiAgICAvLyBhZnRlclN1aXRlIGFyZW4ndCBleGVjdXRlZCBiZWZvcmUgYWZ0ZXIgaG9va1xuICAgIGlmICh0aGlzLl9jb25maWcubW9jaGFPcHRzICYmIHRoaXMuX2NvbmZpZy5tb2NoYU9wdHMuYmFpbCAmJiBCb29sZWFuKHJlc3VsdCkpIHtcbiAgICAgIGZhaWx1cmVzID0gMTtcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0ID09PSAwKSB7XG4gICAgICBmYWlsdXJlcyA9IDA7XG4gICAgfVxuXG4gICAgY29uc3QgeyBwcmVmZXJTY2VuYXJpb05hbWUgfSA9IHRoaXMuX29wdGlvbnM7XG4gICAgLy8gRm9yIEN1Y3VtYmVyOiBDaGVja3Mgc2NlbmFyaW9zIHRoYXQgcmFuIChpLmUuIG5vdCBza2lwcGVkKSBvbiB0aGUgc2Vzc2lvblxuICAgIC8vIE9ubHkgMSBTY2VuYXJpbyByYW4gYW5kIG9wdGlvbiBlbmFibGVkID0+IFJlZGVmaW5lIHNlc3Npb24gbmFtZSB0byBTY2VuYXJpbydzIG5hbWVcbiAgICBpZiAocHJlZmVyU2NlbmFyaW9OYW1lICYmIHRoaXMuX3NjZW5hcmlvc1RoYXRSYW4ubGVuZ3RoID09PSAxKSB7XG4gICAgICB0aGlzLl9mdWxsVGl0bGUgPSB0aGlzLl9zY2VuYXJpb3NUaGF0UmFuLnBvcCgpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXR1cyA9ICdzdGF0dXM6ICcgKyAocmVzdWx0ID4gMCA/ICdmYWlsZWQnIDogJ3Bhc3NlZCcpO1xuXG4gICAgaWYgKCF0aGlzLl9icm93c2VyLmlzTXVsdGlyZW1vdGUpIHtcbiAgICAgIGxvZy5pbmZvKGBVcGRhdGUgam9iIHdpdGggc2Vzc2lvbklkICR7dGhpcy5fYnJvd3Nlci5zZXNzaW9uSWR9LCAke3N0YXR1c31gKTtcbiAgICAgIHJldHVybiB0aGlzLl91cGRhdGUoeyBzZXNzaW9uSWQ6IHRoaXMuX2Jyb3dzZXIuc2Vzc2lvbklkLCBmYWlsdXJlczogcmVzdWx0IH0pO1xuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLmFsbChPYmplY3Qua2V5cyh0aGlzLl9jYXBhYmlsaXRpZXMpLm1hcChicm93c2VyTmFtZSA9PiB7XG4gICAgICBsb2cuaW5mbyhgVXBkYXRlIG11bHRpcmVtb3RlIGpvYiBmb3IgYnJvd3NlciAnJHticm93c2VyTmFtZX0nIGFuZCBzZXNzaW9uSWQgJHt0aGlzLl9icm93c2VyW2Jyb3dzZXJOYW1lXS5zZXNzaW9uSWR9LCAke3N0YXR1c31gKTtcbiAgICAgIHJldHVybiB0aGlzLl91cGRhdGUoeyBzZXNzaW9uSWQ6IHRoaXMuX2Jyb3dzZXJbYnJvd3Nlck5hbWVdLnNlc3Npb25JZCwgZmFpbHVyZXM6IGZhaWx1cmVzLCBjYWxsZWRPblJlbG9hZDogZmFsc2UsIGJyb3dzZXJOYW1lOiBicm93c2VyTmFtZSB9KTtcbiAgICB9KSk7XG4gIH1cblxuICBhc3luYyBvblJlbG9hZChvbGRTZXNzaW9uSWQsIG5ld1Nlc3Npb25JZCkge1xuICAgIGlmICghdGhpcy5faXNTZXJ2aWNlRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXR1cyA9ICh0aGlzLl9mYWlsdXJlcyA+IDAgPyAnZmFpbGVkJyA6ICdwYXNzZWQnKTtcblxuICAgIGlmICghdGhpcy5fYnJvd3Nlci5pc011bHRpcmVtb3RlKSB7XG4gICAgICBsb2cuaW5mbyhgVXBkYXRlIChyZWxvYWRlZCkgam9iIHdpdGggc2Vzc2lvbklkICR7b2xkU2Vzc2lvbklkfSwgJHtzdGF0dXN9YCk7XG5cbiAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZSh7IHNlc3Npb25JZDogb2xkU2Vzc2lvbklkLCBmdWxsVGl0bGU6IHRoaXMuX2N1cnJlbnRUZXN0VGl0bGUsIHN0YXR1czogc3RhdHVzLCBjYWxsZWRPblJlbG9hZDogdHJ1ZSB9KTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBicm93c2VyTmFtZSA9IHRoaXMuX2Jyb3dzZXIuaW5zdGFuY2VzLmZpbHRlcihicm93c2VyTmFtZSA9PiB0aGlzLl9icm93c2VyW2Jyb3dzZXJOYW1lXS5zZXNzaW9uSWQgPT09IG5ld1Nlc3Npb25JZClbMF07XG4gICAgICBsb2cuaW5mbyhgVXBkYXRlIChyZWxvYWRlZCkgbXVsdGlyZW1vdGUgam9iIGZvciBicm93c2VyICcke2Jyb3dzZXJOYW1lfScgYW5kIHNlc3Npb25JZCAke29sZFNlc3Npb25JZH0sICR7c3RhdHVzfWApO1xuICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlKHsgc2Vzc2lvbklkIDogb2xkU2Vzc2lvbklkLCBmYWlsdXJlczp0aGlzLl9mYWlsdXJlcywgY2FsbGVkT25SZWxvYWQ6IHRydWUsIGJyb3dzZXJOYW1lOiBicm93c2VyTmFtZSB9KTtcbiAgICB9XG5cbiAgICB0aGlzLl9mYWlsUmVhc29ucyA9IFtdO1xuICAgIHRoaXMuX3NjZW5hcmlvc1RoYXRSYW4gPSBbXTtcbiAgICBkZWxldGUgdGhpcy5fc3VpdGVUaXRsZTtcbiAgICBkZWxldGUgdGhpcy5fZnVsbFRpdGxlO1xuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZSh7IHNlc3Npb25JZCwgZnVsbFRpdGxlLCBzdGF0dXMsIGZhaWx1cmVzLCBjYWxsZWRPblJlbG9hZCA9IGZhbHNlLCBicm93c2VyTmFtZSB9KSB7XG4gICAgaWYgKCF0aGlzLl9vcHRpb25zLnNldFNlc3Npb25TdGF0dXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2xlZXAgPSBtcyA9PiBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgbXMpKTtcbiAgICBhd2FpdCBzbGVlcCg1MDAwKTtcbiAgICBpZiAoY2FsbGVkT25SZWxvYWQpe1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlSm9iKHsgc2Vzc2lvbklkLCBmdWxsVGl0bGUsIHN0YXR1cywgY2FsbGVkT25SZWxvYWQsIGJyb3dzZXJOYW1lIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVKb2IoeyBzZXNzaW9uSWQsIF9mYWlsdXJlczogZmFpbHVyZXMsIGNhbGxlZE9uUmVsb2FkLCBicm93c2VyTmFtZSB9KTtcbiAgXG4gIH1cblxuICBhc3luYyB1cGRhdGVKb2IoeyBzZXNzaW9uSWQsIGZ1bGxUaXRsZSwgc3RhdHVzLCBfZmFpbHVyZXMsIGNhbGxlZE9uUmVsb2FkID0gZmFsc2UsIGJyb3dzZXJOYW1lIH0pIHtcbiAgICBcbiAgICBsZXQgYm9keSA9IHRoaXMuZ2V0Qm9keSh7IF9mYWlsdXJlcywgY2FsbGVkT25SZWxvYWQsIGJyb3dzZXJOYW1lIH0pO1xuICAgIGlmKGNhbGxlZE9uUmVsb2FkKXtcbiAgICAgICBib2R5ID0gdGhpcy5nZXRCb2R5KHsgZnVsbFRpdGxlLCBzdGF0dXMsIGNhbGxlZE9uUmVsb2FkLCBicm93c2VyTmFtZSB9KTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHVwZGF0ZVNlc3Npb25CeUlkKHNlc3Npb25JZCwgYm9keSwgdGhpcy5fbGFtYmRhQ3JlZGVudGlhbHMpO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICBjb25zb2xlLmxvZyhleCk7XG4gICAgfVxuICAgIHRoaXMuX2ZhaWx1cmVzID0gMDtcbiAgfVxuXG4gIGdldEJvZHkoeyBmdWxsVGl0bGUsIHN0YXR1cywgX2ZhaWx1cmVzLCBjYWxsZWRPblJlbG9hZCA9IGZhbHNlLCBicm93c2VyTmFtZSB9KSB7XG4gICAgbGV0IGJvZHkgPSB7fTtcbiAgICBpZiAoXG4gICAgICAhKFxuICAgICAgICAoIXRoaXMuX2Jyb3dzZXIuaXNNdWx0aXJlbW90ZSAmJiB0aGlzLl9jYXBhYmlsaXRpZXMubmFtZSkgfHxcbiAgICAgICAgKHRoaXMuX2Jyb3dzZXIuaXNNdWx0aXJlbW90ZSAmJlxuICAgICAgICAgIHRoaXMuX2NhcGFiaWxpdGllc1ticm93c2VyTmFtZV0uY2FwYWJpbGl0aWVzLm5hbWUpXG4gICAgICApXG4gICAgKSB7XG4gICAgICBib2R5Lm5hbWUgPSB0aGlzLl9mdWxsVGl0bGU7XG4gICAgICBpZihjYWxsZWRPblJlbG9hZCl7XG4gICAgICAgIGJvZHkubmFtZT1mdWxsVGl0bGU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9jYXBhYmlsaXRpZXNbJ0xUOk9wdGlvbnMnXSAmJiB0aGlzLl9jYXBhYmlsaXRpZXNbJ0xUOk9wdGlvbnMnXS5uYW1lKSB7XG4gICAgICAgIGJvZHkubmFtZSA9IHRoaXMuX2NhcGFiaWxpdGllc1snTFQ6T3B0aW9ucyddLm5hbWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChicm93c2VyTmFtZSkge1xuICAgICAgICBib2R5Lm5hbWUgPSBgJHticm93c2VyTmFtZX06ICR7Ym9keS5uYW1lfWA7XG4gICAgICB9XG5cbiAgICAgIGlmIChjYWxsZWRPblJlbG9hZCB8fCB0aGlzLl90ZXN0Q250KSB7XG4gICAgICAgIGxldCB0ZXN0Q250ID0gKyt0aGlzLl90ZXN0Q250O1xuXG4gICAgICAgIGlmICh0aGlzLl9icm93c2VyLmlzTXVsdGlyZW1vdGUpIHtcbiAgICAgICAgICB0ZXN0Q250ID0gTWF0aC5jZWlsKHRlc3RDbnQgLyB0aGlzLl9icm93c2VyLmluc3RhbmNlcy5sZW5ndGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjYWxsZWRPblJlbG9hZCl7XG4gICAgICAgICAgYm9keS5uYW1lICs9IGAgKCR7dGVzdENudH0pYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBib2R5LnN0YXR1c19pbmQgPSBfZmFpbHVyZXMgPiAwID8gJ2ZhaWxlZCcgOiAncGFzc2VkJztcbiAgICBpZiAoY2FsbGVkT25SZWxvYWQpe1xuICAgICAgYm9keS5zdGF0dXNfaW5kID0gc3RhdHVzO1xuICAgIH1cbiAgICByZXR1cm4gYm9keTtcbiAgfVxuXG4gIGFzeW5jIHNldFNlc3Npb25OYW1lKHN1aXRlVGl0bGUsIHRlc3QpIHtcbiAgICBpZiAoIXRoaXMuX29wdGlvbnMuc2V0U2Vzc2lvbk5hbWUgfHwgIXN1aXRlVGl0bGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBuYW1lID0gc3VpdGVUaXRsZTtcbiAgICBpZiAodGhpcy5fb3B0aW9ucy5zZXNzaW9uTmFtZUZvcm1hdCkge1xuICAgICAgbmFtZSA9IHRoaXMuX29wdGlvbnMuc2Vzc2lvbk5hbWVGb3JtYXQoXG4gICAgICAgICAgdGhpcy5fY29uZmlnLFxuICAgICAgICAgIHRoaXMuX2NhcGFiaWxpdGllcyxcbiAgICAgICAgICBzdWl0ZVRpdGxlLFxuICAgICAgICAgIHRlc3Q/LnRpdGxlXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAodGVzdCAmJiAhdGVzdC5mdWxsTmFtZSkge1xuICAgICAgLy8gTW9jaGFcbiAgICAgIGNvbnN0IHByZSA9IHRoaXMuX29wdGlvbnMuc2Vzc2lvbk5hbWVQcmVwZW5kVG9wTGV2ZWxTdWl0ZVRpdGxlID8gYCR7c3VpdGVUaXRsZX0gLSBgIDogJyc7XG4gICAgICBjb25zdCBwb3N0ID0gIXRoaXMuX29wdGlvbnMuc2Vzc2lvbk5hbWVPbWl0VGVzdFRpdGxlID8gYCAtICR7dGVzdC50aXRsZX1gIDogJyc7XG4gICAgICBuYW1lID0gYCR7cHJlfSR7dGVzdC5wYXJlbnR9JHtwb3N0fWA7XG4gICAgfVxuXG4gICAgaWYgKG5hbWUgIT09IHRoaXMuX19mdWxsVGl0bGUpIHtcbiAgICAgIHRoaXMuX19mdWxsVGl0bGUgPSBuYW1lO1xuICAgICAgYXdhaXQgdGhpcy5fc2V0U2Vzc2lvbk5hbWUobmFtZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX3NldFNlc3Npb25SZW1hcmtzKGVycil7XG4gICAgbGV0IHJlcGxhY2VkU3RyaW5nID0gZXJyLnJlcGxhY2UoL1wiL2csIFwiJ1wiKTtcbiAgICBsZXQgZXJyb3JDdXN0b20gPWBsYW1iZGEtaG9vazoge1wiYWN0aW9uXCI6IFwic2V0VGVzdFN0YXR1c1wiLFwiYXJndW1lbnRzXCI6IHtcInN0YXR1c1wiOlwiZmFpbGVkXCIsXCJyZW1hcmtcIjpcIiR7cmVwbGFjZWRTdHJpbmd9XCJ9fWA7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuX2Jyb3dzZXIuZXhlY3V0ZShlcnJvckN1c3RvbSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgIH0gXG4gIH1cblxuICBhc3luYyBfc2V0U2Vzc2lvbk5hbWUoc2Vzc2lvbk5hbWUpIHtcbiAgICBhd2FpdCB0aGlzLl9leGVjdXRlQ29tbWFuZChgbGFtYmRhLW5hbWU9JHtzZXNzaW9uTmFtZX1gKTtcbiAgfVxuXG4gIGFzeW5jIF9leGVjdXRlQ29tbWFuZChjbWQpIHtcbiAgICBpZiAoIXRoaXMuX2Jyb3dzZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2Jyb3dzZXIuaXNNdWx0aXJlbW90ZSkge1xuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKE9iamVjdC5rZXlzKHRoaXMuX2NhcGFiaWxpdGllcykubWFwKGFzeW5jIChicm93c2VyTmFtZSkgPT4ge1xuICAgICAgICBjb25zdCBicm93c2VyID0gdGhpcy5fYnJvd3Nlclticm93c2VyTmFtZV07XG4gICAgICAgIHJldHVybiBhd2FpdCBicm93c2VyLmV4ZWN1dGUoY21kKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX2Jyb3dzZXIuZXhlY3V0ZShjbWQpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFB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